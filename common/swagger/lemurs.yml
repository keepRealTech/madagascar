openapi: 3.0.1
info:
  version: "1.1.0"
  title: Keep Real API

security:
  - bearerAuth: []

tags:
  - name: Login
    description: Login controllers
  - name: User
    description: User related controllers
  - name: Island
    description: Island for KOL controllers
  - name: Feed
    description: Feed stream controllers
  - name: Comment
    description: Comments controllers
  - name: Upload
    description: Upload file controllers
  - name: Reaction
    description: Reactions controllers such as likes
  - name: Notification
    description: Notifications controllers
  - name: Report
    description: Reports controllers
  - name: Config
    description: Configs controllers
  - name: Healthcheck
    description: SLB health check controllers
  - name: Order
    description: Orders controllers
  - name: Payment
    description: Payments controller
  - name: Billing
    description: Billings controller
  - name: Sku
    description: SKU controller
  - name: Membership
    description: Membership controller
paths:
  /api/healthcheck:
    head:
      tags:
        - Healthcheck
      responses:
        '200':
          description: common response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
  /api/v1/login:
    post:
      tags:
        - Login
      summary: logs in
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostLoginRequest'
      responses:
        '200':
          description: ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
  /api/v1/refreshToken:
    post:
      tags:
        - Login
      summary: refreshes token
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostRefreshTokenRequest'
      responses:
        '200':
          description: ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefreshTokenResponse'
  /api/v1/deviceTokens:
    post:
      tags:
        - Login
      summary: update device token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeviceTokenRequest'
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
  /api/v1/userInfo:
    get:
      tags:
        - Login
      summary: retrieves the token user info
      responses:
        '200':
          description: user response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
  /api/v1/users/{id}:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      tags:
        - User
      summary: retrieves a user by id
      responses:
        '200':
          description: user response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FullUserResponse'
    put:
      tags:
        - User
      summary: updates a user by id
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PutUserRequest'
            encoding:
              payload:
                contentType: application/json
      responses:
        '200':
          description: user response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
  /api/v1/islands:
    post:
      tags:
        - Island
      summary: creates a new island
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PostIslandRequest'
      responses:
        '200':
          description: brief island response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BriefIslandResponse'
    get:
      parameters:
        - $ref: '#/components/parameters/nameInQueryOptional'
        - $ref: '#/components/parameters/subscribedInQuery'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Island
      summary: retrieves islands with pagination
      responses:
        '200':
          description: islands response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IslandsResponse'
  /api/v1/islands/checkName:
    get:
      parameters:
        - $ref: '#/components/parameters/nameInQuery'
      tags:
        - Island
      summary: checks if island name exists
      responses:
        '200':
          description: islands response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckIslandResponse'
  /api/v1/islands/myIslands:
    get:
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Island
      summary: retrieves users' islands with pagination
      responses:
        '200':
          description: islands response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BriefIslandsResponse'
  /api/v1/islands/defaultIslands:
    get:
      parameters:
        - $ref: '#/components/parameters/islandIdInQueryOptional'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Island
      summary: retrieves user create and join islands with pagination
      responses:
        '200':
          description: islands response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IslandsResponse'
  /api/v1/islands/officialIslands:
    get:
      tags:
        - Island
      summary: retrieves official islands id
      responses:
        '200':
          description: islands response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IslandProfilesResponse'
  /api/v1/islands/subscribeOfficialIsland:
    post:
      tags:
        - Island
      summary: subscribe official island
      responses:
        '200':
          description: island profile response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IslandProfileResponse'
  /api/v1/islands/{id}:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      tags:
        - Island
      summary: retrieves a island by id
      responses:
        '200':
          description: island response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IslandResponse'
    put:
      tags:
        - Island
      summary: updates a island by id
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PutIslandRequest'
      responses:
        '200':
          description: island response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BriefIslandResponse'
  /api/v1/islands/{id}/feeds:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      parameters:
        - $ref: '#/components/parameters/fromHostInQuery'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Island
      summary: retrieves a list of feeds with pagination
      responses:
        '200':
          description: feeds response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedsResponse'
  /api/v1.1/islands/{id}/feeds:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      parameters:
        - $ref: '#/components/parameters/fromHostInQuery'
        - $ref: '#/components/parameters/timestampAfter'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Island
      summary: retrieves a list of feeds with pagination
      responses:
        '200':
          description: feeds response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelinesResponse'
  /api/v1/islands/{id}/feeds/top:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    post:
      tags:
        - Island
      summary: make a feed to top
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TopFeedRequest'
      responses:
        '200':
          description: feed response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedResponse'

  /api/v1/islands/{id}/poster:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      parameters:
        - $ref: '#/components/parameters/refererIdInQuery'
      tags:
        - Island
      security: []
      summary: retrieves the poster for the given island
      responses:
        '200':
          description: island response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IslandPosterResponse'
  /api/v1/islands/{id}/profile:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      tags:
        - Island
      summary: retrieves a island with detailed profile by id
      responses:
        '200':
          description: island response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IslandProfileResponse'
  /api/v1/islands/{id}/subscribers:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Island
      summary: retrieves a island subscribers with pagination
      responses:
        '200':
          description: users response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsersResponse'
  /api/v1/islands/{id}/subscribe:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    post:
      tags:
        - Island
      summary: subscribe to an island
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscribeIslandRequest'
      responses:
        '200':
          description: common response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
  /api/v1/islands/{id}/unsubscribe:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    post:
      tags:
        - Island
      summary: unsubscribe to an island
      responses:
        '200':
          description: common response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
  /api/v1/islands/{id}/reposts:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Island
      summary: retrieves a list of reposts with pagination
      responses:
        '200':
          description: reposts response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RepostsResponse'
    post:
      tags:
        - Island
      summary: creates a new repost
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostRepostRequest'
      responses:
        '200':
          description: reaction response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RepostResponse'
  /api/v1/reports:
    post:
      tags:
        - Report
      summary: creates a new report
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostReportRequest'
      responses:
        '200':
          description: report response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReportResponse'
  /api/v1/feeds:
    get:
      parameters:
        - $ref: '#/components/parameters/timestampAfter'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Feed
      summary: retrieves a list of feeds with pagination
      responses:
        '200':
          description: feeds response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelinesResponse'
    post:
      tags:
        - Feed
      summary: creates a new feed
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PostFeedRequest'
      responses:
        '200':
          description: brief feed response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
  /api/v1.1/feeds:
    post:
      tags:
        - Feed
      summary: creates a new feed
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostFeedRequestV2'
      responses:
        '200':
          description: brief feed response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedResponse'
  /api/v1/feeds/check:
    post:
      tags:
        - Feed
      summary: check if has new feed
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostCheckFeedsRequest'
      responses:
        '200':
          description: check feed response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostCheckFeedsResponse'
  /api/v1/feeds/{id}:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      tags:
        - Feed
      summary: retrieves a feed by id
      responses:
        '200':
          description: feed response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedResponse'
    delete:
      tags:
        - Feed
      summary: deletes a feed by id
      responses:
        '200':
          description: common response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
  /api/v1/feeds/{id}/comments:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Feed
      summary: retrieves a list of comments with pagination
      responses:
        '200':
          description: comments response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentsResponse'
    post:
      tags:
        - Feed
      summary: creates a new comment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostCommentRequest'
      responses:
        '200':
          description: comment response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentResponse'
  /api/v1/feeds/{id}/reactions:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Feed
      summary: retrieves a list of reactions with pagination
      responses:
        '200':
          description: reactions response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReactionsResponse'
    post:
      parameters:
        - $ref: '#/components/parameters/isRevokeInQuery'
      tags:
        - Feed
      summary: creates a new reaction
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostReactionRequest'
      responses:
        '200':
          description: reaction response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReactionResponse'
  /api/v1/feeds/{id}/reposts:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Feed
      summary: retrieves a list of reposts with pagination
      responses:
        '200':
          description: reposts response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RepostsResponse'
    post:
      tags:
        - Feed
      summary: creates a new repost
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostRepostRequest'
      responses:
        '200':
          description: reaction response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RepostResponse'
  /api/v1/comments/{id}:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    delete:
      tags:
        - Comment
      summary: deletes a comment by id
      responses:
        '200':
          description: common response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
  /api/v1/upload/mediaUrls:
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MediaUrlsRequest'
      tags:
        - Upload
      summary: retrieves upload image url
      responses:
        '200':
          description: retrieve image url
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadUrlListResponse'
  /api/v1/notifications:
    get:
      parameters:
        - $ref: '#/components/parameters/notificationTypeInQuery'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
      tags:
        - Notification
      summary: retrieves a list of notification with pagination
      responses:
        '200':
          description: notifications response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationsResponse'
  /api/v1/notifications/count:
    get:
      tags:
        - Notification
      summary: retrieves the count of unread notifications
      responses:
        '200':
          description: notifications count response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationsCountResponse'
  /api/v1/configs:
    get:
      parameters:
        - $ref: '#/components/parameters/configTypeInQuery'
        - $ref: '#/components/parameters/versionInQuery'
        - $ref: '#/components/parameters/channelInQuery'
      tags:
        - Config
      summary: retrieves the client config info
      responses:
        '200':
          description: client configurations
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfigurationResponse'
  /api/v1/updateInfo/ios:
    get:
      parameters:
        - $ref: '#/components/parameters/versionInQuery'
      tags:
        - Config
      summary: retrieves the update info for ios
      responses:
        '200':
          description: client update info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IOSUpdateInfoResponse'
  /api/v1/updateInfo/android:
    get:
      parameters:
        - $ref: '#/components/parameters/versionInQuery'
      tags:
        - Config
      summary: retrieves the update info for ios
      responses:
        '200':
          description: client update info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AndroidUpdateInfoResponse'
  /api/v1/setupInfo/android:
    get:
      tags:
        - Config
      security: []
      summary: get the android setup info
      responses:
        '200':
          description: client setup info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AndroidSetupInfoResponse'
  /api/v1/orders/wechat/{id}/check:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    post:
      tags:
        - Order
      summary: get the wechat order
      responses:
        '200':
          description: wechat order
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WechatOrderResponse'
  /api/v1/orders/ios:
    post:
      tags:
        - Order
      summary: create a new ios shell order
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostIOSOrderRequest'
      responses:
        '200':
          description: ios scallop order
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IOSOrderResponse'
  /api/v1/orders/ios/{id}/check:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    post:
      tags:
        - Order
      summary: checks an ios order
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckIOSOrderRequest'
      responses:
        '200':
          description: ios scallop order
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IOSOrderResponse'
  /api/v1/islands/{id}/memberSubscription/wechatPay:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    post:
      tags:
        - Payment
      summary: purchase with wechat pay
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscribeMemberRequest'
      responses:
        '200':
          description: wechat order
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WechatOrderResponse'
  /api/v1/islands/{id}/memberSubscription/shellPay:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    post:
      tags:
        - Payment
      summary: purchase with shell
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscribeMemberRequest'
      responses:
        '200':
          description: dummy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
  /api/v1/balances/myWallet:
    get:
      tags:
        - Billing
      summary: get user's wallet
      responses:
        '200':
          description: wallet info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BalanceResponse'
  /api/v1/balances/withdraw:
    post:
      tags:
        - Billing
      summary: submit a withdraw request
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostWithdrawRequest'
      responses:
        '200':
          description: billing info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BalanceResponse'
  /api/v1/billingInfo:
    get:
      tags:
        - Billing
      summary: get current user's billing info
      responses:
        '200':
          description: billing info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillingInfoResponse'
    put:
      tags:
        - Billing
      summary: post current user's billing info
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutBillingInfoRequest'
      responses:
        '200':
          description: billing info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillingInfoResponse'
  /api/v1/balances/skus:
    get:
      tags:
        - Sku
      summary: get all active skus
      responses:
        '200':
          description: skus info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShellSkusResponse'
  /api/v1/membership/{id}/skus:
    parameters:
      - $ref: "#/components/parameters/idInPath"
    get:
      tags:
        - Sku
      summary: get all active membership skus
      responses:
        '200':
          description: skus info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipSkusResponse'
  /api/v1/islands/{id}/memberships:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    post:
      tags:
        - Membership
      summary: Create a new membership for given island
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostMembershipRequest'
      responses:
        '200':
          description: comment response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipResponse'
    get:
      tags:
        - Membership
      summary: Get memberships for island
      responses:
        '200':
          description: comment response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipsResponse'
  /api/v1/islands/{id}/feedMemberships:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      tags:
        - Membership
      summary: Get memberships for island
      responses:
        '200':
          description: comment response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedMembershipsResponse'
  /api/v1/memberships/{id}:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    get:
      tags:
        - Membership
      summary: Retrieve a membership
      responses:
        '200':
          description: comment response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipResponse'
    put:
      tags:
        - Membership
      summary: Update a membership
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutMembershipRequest'
      responses:
        '200':
          description: comment response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipResponse'
    delete:
      tags:
        - Membership
      summary: Remove a membership
      responses:
        '200':
          description: common response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
  /api/v1/memberships/{id}/deactivate:
    parameters:
      - $ref: '#/components/parameters/idInPath'
    put:
      tags:
        - Membership
      summary: deletes a membership by id
      responses:
        '200':
          description: common response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
  /api/v1/memberships/{id}/top:
    parameters:
      - $ref: '#/components/parameters/idInPath'
      - $ref: '#/components/parameters/isRevokeInQuery'
    post:
      tags:
        - Membership
      summary: deletes a membership by id
      responses:
        '200':
          description: common response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DummyResponse'
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  parameters:
    idInPath:
      in: path
      name: id
      description: id
      required: true
      schema:
        type: string
    timestampAfter:
      in: query
      name: minTimestamp
      description: timestamp after
      required: false
      schema:
        type: integer
        format: int64
        default: 0
    page:
      in: query
      name: page
      description: page number
      required: false
      schema:
        type: integer
        minimum: 0
        default: 0
    pageSize:
      in: query
      name: pageSize
      description: size of a page
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 10
    islandidInPath:
      in: query
      name: islandId
      description: island id
      required: false
      schema:
        type: string
    islandIdInQueryOptional:
      in: query
      name: islandId
      description: island id
      required: false
      schema:
        type: string
    fromHostInQuery:
      in: query
      name: fromHost
      required: false
      schema:
        type: boolean
    nameInQuery:
      in: query
      name: name
      description: name
      required: true
      schema:
        type: string
    nameInQueryOptional:
      in: query
      name: name
      description: name
      required: false
      schema:
        type: string
    subscribedInQuery:
      in: query
      name: subscribed
      description: whether subscribed
      required: false
      schema:
        type: boolean
    fileNameInQuery:
      in: query
      name: fileName
      description: fileName
      required: true
      schema:
        type: string
    notificationTypeInQuery:
      in: query
      name: type
      required: false
      schema:
        $ref: '#/components/schemas/NotificationType'
    isRevokeInQuery:
      in: query
      name: isRevoke
      description: whether is revoking a reaction
      required: false
      schema:
        type: boolean
    configTypeInQuery:
      in: query
      name: configType
      required: true
      schema:
        $ref: '#/components/schemas/ConfigType'
    versionInQuery:
      in: query
      name: version
      required: true
      schema:
        type: integer
    channelInQuery:
      in: query
      name: channel
      required: false
      schema:
        type: string
    refererIdInQuery:
      in: query
      name: refererId
      required: true
      schema:
        type: string
  schemas:
    LoginType:
      type: string
      enum:
        - LOGIN_OAUTH_WECHAT
        - LOGIN_PASSWORD
        - LOGIN_JWT_IOS
    ConfigType:
      type: string
      enum:
        - CONFIG_IOS
        - CONFIG_ANDROID
    ReactionType:
      type: string
      enum:
        - REACTION_LIKE
    GenderType:
      type: integer
      minimum: 0
      maximum: 2
      enum:
        - 0
        - 1
        - 2
    NotificationType:
      type: string
      enum:
        - NOTIFICATION_COMMENTS
        - NOTIFICATION_REACTIONS
        - NOTIFICATION_SYSTEM_NOTICE
        - NOTIFICATION_ISLAND_NOTICE
    IdentityType:
      type: string
      enum:
        - IDENTITY_VIDEO
        - IDENTITY_MUSIC
        - IDENTITY_PAINTING
        - IDENTITY_WRITING
        - IDENTITY_GAMING
        - IDENTITY_PHOTOGRAPH
        - IDENTITY_VLOG
        - IDENTITY_DANCING
        - IDENTITY_GEEK
        - IDENTITY_TRAVEL
        - IDENTITY_FOOD
        - IDENTITY_FASHION
        - IDENTITY_COMIC
        - IDENTITY_OTHERS
    OrderState:
      type: string
      enum:
        - STATE_NOTPAY
        - STATE_USERPAYING
        - STATE_SUCCESS
        - STATE_CLOSED
        - STATE_REFUND
        - STATE_PAYERROR
        - STATE_REVOKED
    NoticeType:
      type: string
      enum:
        - ISLAND_NOTICE_NEW_SUBSCRIBER
        - ISLAND_NOTICE_NEW_MEMBER
    MultiMediaType:
      type: string
      enum:
        - MULTIMEDIA_TYPE_PIC
        - MULTIMEDIA_TYPE_VLOG
        - MULTIMEDIA_TYPE_MUSIC
    CommonResponse:
      type: object
      properties:
        rtn:
          type: integer
          description: return code
        msg:
          type: string
          description: return message
    DummyResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              type: string
    PageInfo:
      type: object
      properties:
        hasMore:
          type: boolean
          description: if it has more pages
        hasContent:
          type: boolean
          description: if it has content in current page
        page:
          type: integer
          description: page number
        pageSize:
          type: integer
          description: page size
    BriefUserDTO:
      type: object
      properties:
        id:
          type: string
        displayId:
          type: string
        name:
          type: string
        portraitImageUri:
          type: string
        gender:
          $ref: '#/components/schemas/GenderType'
        age:
          type: integer
    UserDTO:
      allOf:
        - $ref: '#/components/schemas/BriefUserDTO'
        - type: object
          properties:
            description:
              type: string
            city:
              type: string
            createdAt:
              type: integer
              format: int64
            birthday:
              type: string
              format: date
            identityTypes:
              type: array
              items:
                $ref: '#/components/schemas/IdentityType'
    FullUserDTO:
      allOf:
        - $ref: '#/components/schemas/UserDTO'
        - type: object
          properties:
            createdIslands:
              type: array
              items:
                $ref: '#/components/schemas/BriefIslandDTO'
    PutUserPayload:
      type: object
      properties:
        name:
          type: string
        gender:
          $ref: '#/components/schemas/GenderType'
        description:
          type: string
        city:
          type: string
        birthday:
          type: string
          format: date
        identityTypes:
          type: array
          items:
            $ref: '#/components/schemas/IdentityType'
    PutUserRequest:
      type: object
      properties:
        payload:
          $ref: '#/components/schemas/PutUserPayload'
        portraitImage:
          type: string
          format: binary
    UserResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/UserDTO'
    FullUserResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/FullUserDTO'
    UsersResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            pageInfo:
              $ref: '#/components/schemas/PageInfo'
            data:
              type: array
              items:
                $ref: '#/components/schemas/UserDTO'
    BriefIslandDTO:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        hostId:
          type: string
        portraitImageUri:
          type: string
        description:
          type: string
    PosterIslandDTO:
      type: object
      properties:
        island:
          $ref: '#/components/schemas/FullIslandDTO'
        host:
          $ref: '#/components/schemas/BriefUserDTO'
        referer:
          $ref: '#/components/schemas/BriefUserDTO'
        feeds:
          type: array
          items:
            $ref: '#/components/schemas/PosterFeedDTO'
    IslandDTO:
      allOf:
        - $ref: '#/components/schemas/BriefIslandDTO'
        - type: object
          properties:
            memberCount:
              type: integer
    FullIslandDTO:
      allOf:
        - $ref: '#/components/schemas/IslandDTO'
        - type: object
          properties:
            secret:
              type: string
    IslandProfileDTO:
      type: object
      properties:
        island:
          $ref: '#/components/schemas/FullIslandDTO'
        host:
          $ref: '#/components/schemas/UserDTO'
        userIndex:
          type: string
        subscribed:
          type: boolean
        subscribedAt:
          type: integer
          format: int64
    CheckIslandDTO:
      type: object
      properties:
        isExisted:
          type: boolean
    PutIslandPayload:
      type: object
      properties:
        name:
          type: string
          description: island name
        description:
          type: string
          description: descriptions
        secret:
          type: string
          description: secrets for joining island
    PostIslandPayload:
      type: object
      properties:
        name:
          type: string
          description: island name
        secret:
          type: string
          description: secrets for joining island
      required:
        - name
        - secret
    PutIslandRequest:
      type: object
      properties:
        payload:
          $ref: '#/components/schemas/PutIslandPayload'
        portraitImage:
          type: string
          description: portrait image
          format: binary
    PostIslandRequest:
      type: object
      properties:
        payload:
          $ref: '#/components/schemas/PostIslandPayload'
        portraitImage:
          type: string
          description: portrait image
          format: binary
      required:
        - payload
    SubscribeIslandRequest:
      type: object
      properties:
        secret:
          type: string
          description: island secret
      required:
        - secret
    MediaUrlsRequest:
      type: object
      properties:
        fileNames:
          type: array
          items:
            type: string
      required:
        - fileNames
    CheckIslandResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/CheckIslandDTO'
    BriefIslandResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/BriefIslandDTO'
    IslandPosterResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/PosterIslandDTO'
    IslandProfileResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/IslandProfileDTO'
    IslandResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/IslandDTO'
    IslandProfilesResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/IslandProfileDTO'
    BriefIslandsResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            pageInfo:
              $ref: '#/components/schemas/PageInfo'
            data:
              type: array
              items:
                $ref: '#/components/schemas/BriefIslandDTO'
    IslandsResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            pageInfo:
              $ref: '#/components/schemas/PageInfo'
            data:
              type: array
              items:
                $ref: '#/components/schemas/IslandDTO'
    ReportDTO:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
        feedId:
          type: string
        islandId:
          type: string
        userId:
          type: string
        reporterId:
          type: string
    PostReportRequest:
      type: object
      properties:
        reportType:
          type: string
          description: feedback content
        feedId:
          type: string
          description: feed id to report
        islandId:
          type: string
          description: island id to report
        userId:
          type: string
          description: user id to report
        reporterId:
          type: string
          description: user id
      required:
        - reportType
        - reporterId
    ReportResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/ReportDTO'
    VLogDTO:
      type: object
      properties:
        uri:
          type: string
        length:
          type: integer
        type:
          $ref: '#/components/schemas/MultiMediaType'
    PictureDTO:
      type: object
      properties:
        uri:
          type: string
        width:
          type: integer
        height:
          type: integer
        type:
          $ref: '#/components/schemas/MultiMediaType'
    MultiMediaDTO:
      oneOf:
        - $ref: '#/components/schemas/VLogDTO'
        - $ref: '#/components/schemas/PictureDTO'
    PosterFeedDTO:
      type: object
      properties:
        id:
          type: string
        text:
          type: string
        user:
          $ref: '#/components/schemas/BriefUserDTO'
        imagesUris:
          type: array
          items:
            type: string
        createdAt:
          type: integer
          format: int64
    BriefFeedDTO:
      type: object
      properties:
        id:
          type: string
        island:
          $ref: '#/components/schemas/BriefIslandDTO'
        user:
          $ref: '#/components/schemas/BriefUserDTO'
        text:
          type: string
        imagesUris:
          type: array
          items:
            type: string
        multimedia:
          type: array
          items:
            $ref: '#/components/schemas/MultiMediaDTO'
        fromHost:
          type: boolean
          description: whether feed posted by the host of island
        comments:
          type: array
          items:
            $ref: '#/components/schemas/CommentDTO'
        toppedAt:
          type: integer
          format: int64
        createdAt:
          type: integer
          format: int64
    SnapshotFeedDTO:
      allOf:
        - $ref: '#/components/schemas/BriefFeedDTO'
        - type: object
          properties:
            isDeleted:
              type: boolean
            isSubscribed:
              type: boolean
    SimpleMembershipDTO:
      type: object
      properties:
        id:
          type: string
        membershipName:
          type: string
        colorType:
          type: integer
    FeedDTO:
      allOf:
        - $ref: '#/components/schemas/BriefFeedDTO'
        - type: object
          properties:
            likesCount:
              type: integer
            commentsCount:
              type: integer
            repostCount:
              type: integer
            isLiked:
              type: boolean
            isAccess:
              type: boolean
            membership:
              $ref: '#/components/schemas/SimpleMembershipDTO'
    PostFeedPayload:
      type: object
      properties:
        islandIds:
          type: array
          items:
            type: string
        membershipIds:
          type: array
          items:
            type: string
        content:
          type: string
    PostFeedRequest:
      type: object
      properties:
        payload:
          $ref: '#/components/schemas/PostFeedPayload'
        images:
          type: array
          items:
            type: string
            format: binary
      required:
        - payload
    PostFeedRequestV2:
      type: object
      properties:
        islandId:
          type: string
        membershipIds:
          type: array
          items:
            type: string
        content:
          type: string
        multimedia:
          type: array
          items:
            $ref: '#/components/schemas/MultiMediaDTO'
      required:
        - islandId
    CheckFeedsMessage:
      type: object
      properties:
        islandId:
          type: string
        timestamp:
          type: integer
          format: int64
    PostCheckFeedsRequest:
      type: object
      properties:
        checkFeedsMessage:
          type: array
          items:
            $ref: '#/components/schemas/CheckFeedsMessage'
    CheckFeedsDTO:
      type: object
      properties:
        islandId:
          type: string
        hasNew:
          type: boolean
    PostCheckFeedsResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/CheckFeedsDTO'
    FeedResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/FeedDTO'
    TimelinesResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/FeedDTO'
    FeedsResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            currentTime:
              type: integer
              format: int64
            pageInfo:
              $ref: '#/components/schemas/PageInfo'
            data:
              type: array
              items:
                $ref: '#/components/schemas/FeedDTO'
    CommentDTO:
      type: object
      properties:
        id:
          type: string
        content:
          type: string
        feedId:
          type: string
        user:
          $ref: '#/components/schemas/BriefUserDTO'
        replyTo:
          $ref: '#/components/schemas/BriefUserDTO'
        createdAt:
          type: integer
          format: int64
    PostCommentRequest:
      type: object
      properties:
        content:
          type: string
        replyToId:
          type: string
      required:
        - content
    CommentResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/CommentDTO'
    CommentsResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            pageInfo:
              $ref: '#/components/schemas/PageInfo'
            data:
              type: array
              items:
                $ref: '#/components/schemas/CommentDTO'
    ReactionDTO:
      type: object
      properties:
        id:
          type: string
        feedId:
          type: string
        user:
          $ref: '#/components/schemas/BriefUserDTO'
        reactionType:
          type: array
          items:
            $ref: '#/components/schemas/ReactionType'
        createdAt:
          type: integer
          format: int64
    PostReactionRequest:
      type: object
      properties:
        reactions:
          type: array
          items:
            $ref: '#/components/schemas/ReactionType'
      required:
        - reactionType
    ReactionResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/ReactionDTO'
    ReactionsResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            pageInfo:
              $ref: '#/components/schemas/PageInfo'
            data:
              type: array
              items:
                $ref: '#/components/schemas/ReactionDTO'
    NotificationDTO:
      oneOf:
        - $ref: '#/components/schemas/CommentNotificationDTO'
        - $ref: '#/components/schemas/ReactionNotificationDTO'
        - $ref: '#/components/schemas/NoticeNotificationDTO'
        - $ref: '#/components/schemas/SystemNotificationDTO'
    NoticeDTO:
      oneOf:
        - $ref: '#/components/schemas/SubscribeNoticeDTO'
        - $ref: '#/components/schemas/MemberNoticeDTO'
    SystemNotificationDTO:
      type: object
      properties:
        notificationType:
          $ref: '#/components/schemas/NotificationType'
        systemNotice:
          $ref: '#/components/schemas/SystemNoticeDTO'
    SystemNoticeDTO:
      type: object
      properties:
        name:
          type: string
        portraitImageUri:
          type: string
        content:
          type: string
    SubscribeNoticeDTO:
      type: object
      properties:
        noticeType:
          $ref: '#/components/schemas/NoticeType'
        island:
          $ref: '#/components/schemas/BriefIslandDTO'
        subscriber:
          $ref: '#/components/schemas/BriefUserDTO'
    MemberNoticeDTO:
      type: object
      properties:
        noticeType:
          $ref: '#/components/schemas/NoticeType'
        island:
          $ref: '#/components/schemas/BriefIslandDTO'
        member:
          $ref: '#/components/schemas/BriefUserDTO'
        membershipId:
          type: string
        membershipName:
          type: string
        pricePerMonthInCents:
          type: integer
          format: int64
    ReactionNotificationDTO:
      type: object
      properties:
        id:
          type: string
        notificationType:
          $ref: '#/components/schemas/NotificationType'
        feed:
          $ref: '#/components/schemas/SnapshotFeedDTO'
        reactions:
          $ref: '#/components/schemas/ReactionDTO'
        hasRead:
          type: boolean
        createdAt:
          type: integer
          format: int64
    CommentNotificationDTO:
      type: object
      properties:
        id:
          type: string
        notificationType:
          $ref: '#/components/schemas/NotificationType'
        feed:
          $ref: '#/components/schemas/SnapshotFeedDTO'
        comment:
          $ref: '#/components/schemas/CommentDTO'
        hasRead:
          type: boolean
        createdAt:
          type: integer
          format: int64
    NoticeNotificationDTO:
      type: object
      properties:
        id:
          type: string
        notificationType:
          $ref: '#/components/schemas/NotificationType'
        notice:
          $ref: '#/components/schemas/NoticeDTO'
        hasRead:
          type: boolean
        createdAt:
          type: integer
          format: int64
    UnreadNotificationCountDTO:
      type: object
      properties:
        hasUnread:
          type: boolean
        UnreadCommentsCount:
          type: integer
        UnreadReactionsCount:
          type: integer
        UnreadIslandNoticesCount:
          type: integer
    UploadUrlDTO:
      type: object
      properties:
        objectName:
          type: string
        url:
          type: string
    UploadUrlListResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/UploadUrlDTO'
    NotificationsCountResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/UnreadNotificationCountDTO'
    NotificationsResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            pageInfo:
              $ref: '#/components/schemas/PageInfo'
            data:
              type: array
              items:
                $ref: '#/components/schemas/NotificationDTO'
    RepostDTO:
      type: object
      properties:
        id:
          type: string
        content:
          type: string
        feedId:
          type: string
        islandId:
          type: string
        isSuccessful:
          type: boolean
        userId:
          type: string
        createdAt:
          type: integer
          format: int64
    PostRepostRequest:
      type: object
      properties:
        content:
          type: string
        isSuccessful:
          type: boolean
      required:
        - reactionType
    RepostResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/RepostDTO'
    RepostsResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            pageInfo:
              $ref: '#/components/schemas/PageInfo'
            data:
              type: array
              items:
                $ref: '#/components/schemas/RepostDTO'
    WechatOAuthLoginPayload:
      type: object
      properties:
        code:
          type: string
    PasswordLoginPayload:
      type: object
      properties:
        username:
          type: string
        password:
          type: string
    LoginPayload:
      oneOf:
        - $ref: '#/components/schemas/WechatOAuthLoginPayload'
        - $ref: '#/components/schemas/PasswordLoginPayload'
    PostLoginRequest:
      type: object
      properties:
        loginType:
          $ref: '#/components/schemas/LoginType'
        data:
          $ref: '#/components/schemas/LoginPayload'
      required:
        - loginType
        - data
    PostRefreshTokenRequest:
      type: object
      properties:
        refreshToken:
          type: string
      required:
        - refreshToken
    LoginResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/LoginTokenInfo'
    RefreshTokenResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/BriefTokenInfo'
    BriefTokenInfo:
      type: object
      properties:
        token:
          type: string
        refreshToken:
          type: string
    LoginTokenInfo:
      allOf:
        - $ref: '#/components/schemas/BriefTokenInfo'
        - type: object
          properties:
            user:
              $ref: '#/components/schemas/UserDTO'
    IOSConfigurationDTO:
      type: object
      properties:
        islandFeedLoopInterval:
          type: integer
        myIslandsPageSize:
          type: integer
        messageLoopInterval:
          type: integer
        guestPageSize:
          type: integer
        islandCheckInterval:
          type: integer
        configTimeout:
          type: integer
        audit:
          type: boolean
    AndroidConfigurationDTO:
      type: object
      properties:
        audit:
          type: boolean
        isAccountLogin:
          type: boolean
    ConfigurationDTO:
      oneOf:
        - $ref: '#/components/schemas/IOSConfigurationDTO'
        - $ref: '#/components/schemas/AndroidConfigurationDTO'
    ConfigurationResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/ConfigurationDTO'
    UpdateInfoDTO:
      type: object
      properties:
        shouldForce:
          type: boolean
        isLatest:
          type: boolean
        address:
          type: string
        message:
          type: string
        currentVersion:
          type: integer
        nextVersion:
          type: integer
    IOSUpdateInfoResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/UpdateInfoDTO'
    AndroidUpdateInfoResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/UpdateInfoDTO'
    SetupInfoDTO:
      type: object
      properties:
        version:
          type: integer
        address:
          type: string
    AndroidSetupInfoResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/SetupInfoDTO'
    TopFeedRequest:
      type: object
      properties:
        feedId:
          type: string
        isRevoke:
          type: boolean
    PostIOSOrderRequest:
      type: object
      properties:
        shellSkuId:
          type: string
    WechatOrderDTO:
      type: object
      properties:
        id:
          type: string
        nonceStr:
          type: string
        appId:
          type: string
        partnerId:
          type: string
        prepayId:
          type: string
        signature:
          type: string
        userId:
          type: string
        feeInCents:
          type: integer
          format: int64
        timestamp:
          type: integer
          format: int64
        state:
          $ref: '#/components/schemas/OrderState'
    IOSOrderDTO:
      type: object
      properties:
        id:
          type: string
        tradeNumber:
          type: string
        userId:
          type: string
        skuId:
          type: string
        createdAt:
          type: integer
          format: int64
        state:
          $ref: '#/components/schemas/OrderState'
    WechatOrderResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/WechatOrderDTO'
    IOSOrderResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/IOSOrderDTO'
    CheckIOSOrderRequest:
      type: object
      properties:
        receiptId:
          type: string
    SubscribeMemberRequest:
      type: object
      properties:
        membershipSkuId:
          type: string
    BalanceDTO:
      type: object
      properties:
        id:
          type: string
        userId:
          type: string
        balanceInCents:
          type: integer
          format: int64
        balanceEligibleInCents:
          type: integer
          format: int64
        balanceInShells:
          type: integer
          format: int64
    BalanceResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/BalanceDTO'
    BillingInfoDTO:
      type: object
      properties:
        id:
          type: string
        userId:
          type: string
        name:
          type: string
        mobile:
          type: string
        identityNumber:
          type: string
        account:
          type: string
        verified:
          type: boolean
    PutBillingInfoRequest:
      type: object
      properties:
        name:
          type: string
        mobile:
          type: string
        identityNumber:
          type: string
        accountNumber:
          type: string
      required:
        - name
        - mobile
        - identityNumber
        - accountNumber
    BillingInfoResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/BillingInfoDTO'
    ShellSkuDTO:
      type: object
      properties:
        id:
          type: string
        description:
          type: string
        shells:
          type: integer
          format: int64
        priceInCents:
          type: integer
          format: int64
        isDefault:
          type: boolean
    ShellSkusResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/ShellSkuDTO'
    MembershipSkuDTO:
      type: object
      properties:
        id:
          type: string
        description:
          type: string
        membershipId:
          type: string
        isDefault:
          type: boolean
        timeInMonths:
          type: integer
        priceInCents:
          type: integer
          format: int64
        priceInShells:
          type: integer
          format: int64
    MembershipSkusResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/MembershipSkuDTO'
    PostWithdrawRequest:
      type: object
      properties:
        amountInCents:
          type: integer
          format: int64
          minimum: 100
    DeviceTokenRequest:
      type: object
      properties:
        isBind:
          type: boolean
        deviceToken:
          type: string
        deviceType:
          type: integer
      required:
        - isBind
        - deviceToken
        - deviceType
    FeedMembershipDTO:
      type: object
      properties:
        id:
          type: string
        membershipName:
          type: string
        chargePerMonth:
          type: integer
        memberCount:
          type: integer
    BriefMembershipDTO:
      type: object
      properties:
        id:
          type: string
        hostId:
          type: string
        islandId:
          type: string
        membershipName:
          type: string
        description:
          type: array
          items:
            type: string
        chargePerMonth:
          type: integer
        colorType:
          type: integer
    MembershipDTO:
      allOf:
        - $ref: '#/components/schemas/BriefMembershipDTO'
        - type: object
          properties:
            memberCount:
              type: integer
            isTop:
              type: boolean
    PostMembershipRequest:
      type: object
      properties:
        description:
          type: array
          items:
            type: string
        chargePerMonth:
          type: integer
          minimum: 100
        name:
          type: string
    PutMembershipRequest:
      type: object
      properties:
        description:
          type: array
          items:
            type: string
        chargePerMonth:
          type: integer
          minimum: 100
          description: can only increase
        name:
          type: string
    MembershipResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/BriefMembershipDTO'
    MembershipsResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/MembershipDTO'
    FeedMembershipsResponse:
      allOf:
        - $ref: '#/components/schemas/CommonResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/FeedMembershipDTO'